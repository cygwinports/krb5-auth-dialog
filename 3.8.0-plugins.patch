--- origsrc/krb5-auth-dialog-3.8.0/plugins/Makefile.am	2013-08-07 20:40:01.037188000 -0500
+++ src/krb5-auth-dialog-3.8.0/plugins/Makefile.am	2013-08-07 20:39:49.000000000 -0500
@@ -28,6 +28,8 @@ libka_plugin_dummy_la_CPPFLAGS = \
 libka_plugin_dummy_la_LDFLAGS = \
 	-module \
 	-avoid-version \
+	-no-undefined -Wl,$(top_builddir)/src/libka-plugin.a \
+	$(GIO_LIBS)
 	$(NULL)
 
 # PAM plugin
@@ -45,6 +46,8 @@ libka_plugin_pam_la_CPPFLAGS = \
 libka_plugin_pam_la_LDFLAGS = \
 	-module \
 	-avoid-version \
+	-no-undefined -Wl,$(top_builddir)/src/libka-plugin.a \
+	$(GIO_LIBS)
 	$(PAM_LIBS) \
 	$(NULL)
 endif
@@ -63,4 +65,6 @@ libka_plugin_afs_la_CPPFLAGS = \
 libka_plugin_afs_la_LDFLAGS = \
 	-module \
 	-avoid-version \
+	-no-undefined -Wl,$(top_builddir)/src/libka-plugin.a \
+	$(GIO_LIBS)
 	$(NULL)
--- origsrc/krb5-auth-dialog-3.8.0/src/Makefile.am	2013-08-07 20:40:01.052188900 -0500
+++ src/krb5-auth-dialog-3.8.0/src/Makefile.am	2013-08-07 20:39:49.000000000 -0500
@@ -74,6 +74,8 @@ krb5_auth_dialog_CFLAGS = \
 	$(AM_CFLAGS) \
 	$(NULL)
 
+krb5_auth_dialog_LDFLAGS = -export-dynamic -Wl,--out-implib,libka-plugin.a
+
 krb5_auth_dialog_LDADD = \
 	$(top_builddir)/secmem/libsecmem.a \
 	$(NETWORK_MANAGER_LIBS) \
--- origsrc/krb5-auth-dialog-3.8.0/src/ka-plugin-loader.c	2013-03-15 09:16:21.000000000 -0500
+++ src/krb5-auth-dialog-3.8.0/src/ka-plugin-loader.c	2013-08-07 20:40:32.194970200 -0500
@@ -120,9 +120,7 @@ load_plugins (KaPluginLoader *self)
 		char *fname;
 		KaPlugin *plugin;
 
-		fname = g_strdup_printf("libka-plugin-%s.%s",
-                                        plugins[i],
-                                        G_MODULE_SUFFIX);
+		fname = g_strdup_printf("ka-plugin-%s", plugins[i]);
 		path = g_module_build_path (KA_PLUGINS_DIR, fname);
 
 		plugin = load_plugin (path);
